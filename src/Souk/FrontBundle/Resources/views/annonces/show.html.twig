{% extends 'FrontBundle::layout.html.twig' %}
{% block style %}

    <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    <link rel="stylesheet" href="/resources/demos/style.css">
    <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <link href="{{ asset('bundles/front/css/style_Nour.css') }}" rel="stylesheet"/>
{% endblock style %}
{% block body %}
    <h1>Annonce</h1>

    <table>
        <tbody>

            <tr>
                <th>Titre</th>
                <td>{{ annonce.titre }}</td>
            </tr>
            <tr>
                <th>Description</th>
                <td>{{ annonce.description }}</td>
            </tr>
            <tr>
                <th>Prix</th>
                <td>{{ annonce.prix }}</td>
            </tr>
            <tr>
                <th>Disponible</th>
                <td>{% if annonce.disponible %}Yes{% else %}No{% endif %}</td>
            </tr>
            <tr>
                <th>Datecreation</th>
                <td>{% if annonce.dateCreation %}{{ annonce.dateCreation|date('Y-m-d') }}{% endif %}</td>
            </tr>
        </tbody>
    </table>

<!-- Nour's work -->
{% if annonce.commercial.id != app.user.id %}
    <div class="content">
        {% if com==0 %}
        <a href="#" class="btn left" data-toggle="modal" data-target="#newCom">

            <span class="right title"><span class="arrow-right"></span><span class=" fa fa-check"></span>    Commander</span>
        </a>
        {% else %}
            <a href="#" class="btn left" data-toggle="modal" data-target="#noCom">

                <span class="right title"><span class="arrow-right"></span><span class=" fa fa-check"></span>    Commander</span>
            </a>
        {% endif %}
    </div>
{% endif %}
    <!-- Modal new com-->
    <div id="newCom" class="modal fade" role="dialog">
        <div class="modal-dialog">
            {{ form_start(form) }}
            <!-- Modal content-->
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title">Nouvelle Commande </h4>
                </div>

                <div class="modal-body">

                        <div class="col-md-12">
                            <div class="form-group col-md-6">
                                {{ form_label(form.dateCom) }}
                                {{ form_errors(form.dateCom) }}
                                {{ form_widget(form.dateCom, {'attr': {'class': 'form-control'}}) }}
                            </div>
                            <div class="form-group col-md-6">
                                {{ form_label(form.quantite) }}
                                {{ form_errors(form.quantite) }}
                                {{ form_widget(form.quantite, {'attr': {'class': 'form-control'}}) }}
                            </div>
                        </div>

                </div>
                <div class="modal-footer">
                    <button type="submit" class="btn btn-default" ><i class="fa fa-check"></i>  Valider  </button>

                    <button type="button" class="btn btn-default" data-dismiss="modal"><i class="fa fa-times"></i>  Fermer</button>

                </div>

            </div>
            {{ form_end(form) }}
        </div>
    </div>
    <!-- Modal no com-->
    <div id="noCom" class="modal fade" role="dialog">
        <div class="modal-dialog">
            <!-- Modal content-->
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title">Nouvelle Commande </h4>
                </div>

                <div class="modal-body">
                    <p>Vus avez déjà une commande en attente pour cette annonce.</p>


                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal"><i class="fa fa-times"></i>  Fermer</button>

                </div>

            </div>
        </div>
    </div>
{% endblock body %}
{% block js %}
    <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    <link rel="stylesheet" href="/resources/demos/style.css">
    <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <script>
        $( function() {
            $( "#souk_backbundle_commandes_dateCom" ).datepicker({
                altField: "#souk_backbundle_commandes_dateCom",
                altFormat: "yy-mm-dd"
            });
        } );
    </script>
{% endblock js %}